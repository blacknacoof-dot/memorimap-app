<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Admin Redirect</title>
    <script>
        (function () {
            // 무한 루프 방지 로직
            const MAX_REDIRECTS = 3;
            const REDIRECT_KEY = 'admin_redirect_count';
            let redirectCount = parseInt(sessionStorage.getItem(REDIRECT_KEY) || '0');

            if (redirectCount >= MAX_REDIRECTS) {
                console.error('Too many redirects, stopping');
                document.body.innerHTML = '<div style="text-align:center;padding:50px;"><h2>리다이렉션 오류</h2><p>관리자에게 문의하세요.</p></div>';
                sessionStorage.removeItem(REDIRECT_KEY);
                return;
            }

            sessionStorage.setItem(REDIRECT_KEY, String(redirectCount + 1));

            // 현재 경로 확인 및 리다이렉션
            if (window.location.pathname === '/admin' || window.location.pathname === '/admin/') {
                setTimeout(() => {
                    // React Router가 역할을 처리할 수 있도록 해시 경로로 이동
                    window.location.href = '/#/facility-admin';
                }, 100);
            } else {
                sessionStorage.removeItem(REDIRECT_KEY);
            }
        })();
    </script>
</head>

<body>
    <p>Redirecting to Facility Admin Dashboard...</p>
</body>

</html>